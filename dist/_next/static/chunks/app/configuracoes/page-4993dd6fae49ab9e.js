(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[299],{88:(e,t,r)=>{"use strict";r.d(t,{d:()=>n});var a=r(5155);r(2115);var s=r(4884),o=r(3999);function n(e){let{className:t,...r}=e;return(0,a.jsx)(s.bL,{"data-slot":"switch",className:(0,o.cn)("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",t),...r,children:(0,a.jsx)(s.zi,{"data-slot":"switch-thumb",className:(0,o.cn)("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}},1056:(e,t,r)=>{"use strict";r.d(t,{j:()=>s});class a{isWebAuthnSupported(){return void 0!==window.PublicKeyCredential&&void 0!==navigator.credentials}async registerWithWebAuthn(e){if(!this.isWebAuthnSupported())throw Error("WebAuthn n\xe3o \xe9 suportado neste navegador");try{let t={challenge:this.generateChallenge(),rp:{name:"Trokito",id:window.location.hostname},user:{id:this.stringToBuffer(e),name:e,displayName:e},pubKeyCredParams:[{type:"public-key",alg:-7}],authenticatorSelection:{authenticatorAttachment:"platform",requireResidentKey:!1,userVerification:"preferred"},timeout:6e4,attestation:"none"};if(!await navigator.credentials.create({publicKey:t}))throw Error("Falha ao criar credencial");let r={id:e,name:e,createdAt:new Date};return localStorage.setItem(this.USER_STORAGE_KEY,JSON.stringify(r)),r}catch(e){return console.error("Erro no registro com WebAuthn:",e),null}}async authenticateWithWebAuthn(){if(!this.isWebAuthnSupported())throw Error("WebAuthn n\xe3o \xe9 suportado neste navegador");try{let e=localStorage.getItem(this.USER_STORAGE_KEY);if(!e)throw Error("Nenhum usu\xe1rio registrado");let t=JSON.parse(e),r=this.generateChallenge();if(!await navigator.credentials.get({publicKey:{challenge:r,timeout:6e4,userVerification:"preferred"}}))throw Error("Falha na autentica\xe7\xe3o");return t}catch(e){return console.error("Erro na autentica\xe7\xe3o com WebAuthn:",e),null}}setPIN(e){localStorage.setItem(this.PIN_STORAGE_KEY,e)}verifyPIN(e){return localStorage.getItem(this.PIN_STORAGE_KEY)===e}isAuthenticated(){return null!==localStorage.getItem(this.USER_STORAGE_KEY)}getCurrentUser(){let e=localStorage.getItem(this.USER_STORAGE_KEY);return e?JSON.parse(e):null}logout(){localStorage.removeItem(this.USER_STORAGE_KEY),localStorage.removeItem(this.PIN_STORAGE_KEY)}generateChallenge(){let e=new Uint8Array(32);return window.crypto.getRandomValues(e),e.buffer}stringToBuffer(e){return new TextEncoder().encode(e).buffer}constructor(){this.USER_STORAGE_KEY="trokito_user",this.PIN_STORAGE_KEY="trokito_pin"}}let s=new a},2714:(e,t,r)=>{"use strict";r.d(t,{J:()=>n});var a=r(5155);r(2115);var s=r(968),o=r(3999);function n(e){let{className:t,...r}=e;return(0,a.jsx)(s.b,{"data-slot":"label",className:(0,o.cn)("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",t),...r})}},3999:(e,t,r)=>{"use strict";r.d(t,{cn:()=>o});var a=r(2596),s=r(9688);function o(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},4619:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>T});var a=r(5155),s=r(6639),o=r(7168),n=r(8482),i=r(2714),l=r(2115),c=r(1721),d=r(6474),u=r(5196),m=r(7863),h=r(3999);function x(e){let{...t}=e;return(0,a.jsx)(c.bL,{"data-slot":"select",...t})}function g(e){let{...t}=e;return(0,a.jsx)(c.WT,{"data-slot":"select-value",...t})}function p(e){let{className:t,size:r="default",children:s,...o}=e;return(0,a.jsxs)(c.l9,{"data-slot":"select-trigger","data-size":r,className:(0,h.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",t),...o,children:[s,(0,a.jsx)(c.In,{asChild:!0,children:(0,a.jsx)(d.A,{className:"size-4 opacity-50"})})]})}function f(e){let{className:t,children:r,position:s="popper",...o}=e;return(0,a.jsx)(c.ZL,{children:(0,a.jsxs)(c.UC,{"data-slot":"select-content",className:(0,h.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===s&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:s,...o,children:[(0,a.jsx)(b,{}),(0,a.jsx)(c.LM,{className:(0,h.cn)("p-1","popper"===s&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:r}),(0,a.jsx)(y,{})]})})}function v(e){let{className:t,children:r,...s}=e;return(0,a.jsxs)(c.q7,{"data-slot":"select-item",className:(0,h.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",t),...s,children:[(0,a.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,a.jsx)(c.VF,{children:(0,a.jsx)(u.A,{className:"size-4"})})}),(0,a.jsx)(c.p4,{children:r})]})}function b(e){let{className:t,...r}=e;return(0,a.jsx)(c.PP,{"data-slot":"select-scroll-up-button",className:(0,h.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(m.A,{className:"size-4"})})}function y(e){let{className:t,...r}=e;return(0,a.jsx)(c.wn,{"data-slot":"select-scroll-down-button",className:(0,h.cn)("flex cursor-default items-center justify-center py-1",t),...r,children:(0,a.jsx)(d.A,{className:"size-4"})})}var j=r(88),S=r(5328);let N="trokito-settings",w={theme:"system",fontSize:"medium",reducedMotion:!1,highContrast:!1,autoSave:!0,defaultCalculationMode:"suggested",availableDenominations:{bills:[1e4,5e3,2e3,1e3,500,200,100],coins:[50,25,10,5]},maxHistoryItems:100,autoExportHistory:!1};var E=r(7550),C=r(381),A=r(1788),k=r(2525),_=r(6874),O=r.n(_);function T(){let{settings:e,saveSettings:t,resetSettings:r}=function(){let[e,t]=(0,l.useState)(w),[r,a]=(0,l.useState)(!1);(0,l.useEffect)(()=>{s()},[]);let s=()=>{try{let e=localStorage.getItem(N);if(e){let r=JSON.parse(e),a={...w,...r};t(a),o(a)}a(!0)}catch(e){console.error("Erro ao carregar configura\xe7\xf5es:",e),a(!0)}},o=e=>{let t=document.documentElement,r=window.matchMedia("(prefers-color-scheme: dark)").matches;"dark"===e.theme||"system"===e.theme&&r?t.classList.add("dark"):t.classList.remove("dark"),t.classList.remove("text-small","text-medium","text-large"),t.classList.add("text-".concat(e.fontSize));let a={small:"0.875",medium:"1",large:"1.125"};t.style.setProperty("--font-scale",a[e.fontSize]),t.style.setProperty("font-size","calc(1rem * ".concat(a[e.fontSize],")"));let s=window.matchMedia("(prefers-reduced-motion: reduce)").matches;if(e.reducedMotion||s){t.style.setProperty("--motion-duration","0s"),t.style.setProperty("--animation-duration","0s"),t.style.setProperty("animation-duration","0s !important"),t.style.setProperty("transition-duration","0s !important"),t.classList.add("motion-reduce");let e=document.createElement("style");e.id="reduced-motion-styles",e.textContent="\n				*, *::before, *::after {\n					animation-duration: 0s !important;\n					transition-duration: 0s !important;\n					animation-delay: 0s !important;\n					transition-delay: 0s !important;\n				}\n			",document.head.appendChild(e)}else{t.style.removeProperty("--motion-duration"),t.style.removeProperty("--animation-duration"),t.style.removeProperty("animation-duration"),t.style.removeProperty("transition-duration"),t.classList.remove("motion-reduce");let e=document.getElementById("reduced-motion-styles");e&&e.remove()}if(e.highContrast){t.classList.add("high-contrast"),t.style.setProperty("--bg-primary","#000000"),t.style.setProperty("--bg-secondary","#ffffff"),t.style.setProperty("--text-primary","#ffffff"),t.style.setProperty("--text-secondary","#000000"),t.style.setProperty("--border-color","#ffffff"),t.style.setProperty("--accent-color","#ffff00"),t.style.setProperty("--muted-color","#cccccc");let e=document.createElement("style");e.id="high-contrast-styles",e.textContent="\n				body {\n					background-color: var(--bg-primary) !important;\n					color: var(--text-primary) !important;\n				}\n				.bg-background {\n					background-color: var(--bg-primary) !important;\n				}\n				.text-foreground {\n					color: var(--text-primary) !important;\n				}\n				.text-muted-foreground {\n					color: var(--muted-color) !important;\n				}\n				.border {\n					border-color: var(--border-color) !important;\n				}\n				.bg-card {\n					background-color: var(--bg-secondary) !important;\n				}\n				button, input, select, textarea {\n					background-color: var(--bg-secondary) !important;\n					color: var(--text-secondary) !important;\n					border-color: var(--border-color) !important;\n				}\n				.text-primary {\n					color: var(--accent-color) !important;\n				}\n			",document.head.appendChild(e)}else{t.classList.remove("high-contrast"),t.style.removeProperty("--bg-primary"),t.style.removeProperty("--bg-secondary"),t.style.removeProperty("--text-primary"),t.style.removeProperty("--text-secondary"),t.style.removeProperty("--border-color"),t.style.removeProperty("--accent-color"),t.style.removeProperty("--muted-color");let e=document.getElementById("high-contrast-styles");e&&e.remove()}};return{settings:e,isLoaded:r,saveSettings:r=>{try{let a={...e,...r};t(a),localStorage.setItem(N,JSON.stringify(a)),o(a)}catch(e){console.error("Erro ao salvar configura\xe7\xf5es:",e)}},resetSettings:()=>{t(w),localStorage.removeItem(N),o(w)}}}(),c=(0,l.useRef)(null),d=async()=>{if(confirm("Tem certeza que deseja limpar todo o hist\xf3rico? Esta a\xe7\xe3o n\xe3o pode ser desfeita."))try{for(let e of(await S.db.getAllCalculations()))e.id&&await S.db.deleteCalculation(e.id);for(let e of(await S.db.getAllClosings()))e.id&&await S.db.deleteClosing(e.id);alert("Hist\xf3rico limpo com sucesso!")}catch(e){console.error("Erro ao limpar hist\xf3rico:",e),alert("Erro ao limpar hist\xf3rico. Tente novamente.")}},u=async()=>{try{let e=await S.db.exportToCSV(),t=new Blob([e],{type:"text/csv;charset=utf-8;"}),r=URL.createObjectURL(t),a=document.createElement("a");a.setAttribute("href",r),a.setAttribute("download","historico_trokito_".concat(new Date().toISOString().split("T")[0],".csv")),a.style.visibility="hidden",document.body.appendChild(a),a.click(),document.body.removeChild(a),alert("Hist\xf3rico exportado com sucesso!")}catch(e){console.error("Erro ao exportar hist\xf3rico:",e),alert("Erro ao exportar hist\xf3rico. Tente novamente.")}};return(0,a.jsx)(s.A,{children:(0,a.jsx)("div",{className:"min-h-screen bg-background p-4",children:(0,a.jsx)("div",{className:"max-w-md mx-auto space-y-6",children:(0,a.jsxs)("div",{className:"animate-in fade-in slide-in-from-top-2 duration-300",children:[(0,a.jsx)(O(),{href:"/",children:(0,a.jsxs)(o.$,{variant:"ghost",className:"mb-4 pl-0 focus:ring-2 focus:ring-primary focus:ring-offset-2","aria-label":"Voltar para a p\xe1gina inicial",children:[(0,a.jsx)(E.A,{className:"mr-2 h-4 w-4","aria-hidden":"true"}),"Voltar"]})}),(0,a.jsxs)(n.Zp,{children:[(0,a.jsxs)(n.aR,{children:[(0,a.jsxs)(n.ZB,{ref:c,tabIndex:-1,className:"flex items-center gap-2 focus:outline-none",children:[(0,a.jsx)(C.A,{className:"h-6 w-6 text-primary","aria-hidden":"true"}),"Configura\xe7\xf5es"]}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Personalize sua experi\xeancia no Trokito"})]}),(0,a.jsxs)(n.Wu,{className:"space-y-8",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium border-b pb-2",children:"Interface"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.J,{htmlFor:"theme",children:"Tema"}),(0,a.jsxs)(x,{value:e.theme,onValueChange:e=>t({theme:e}),children:[(0,a.jsx)(p,{id:"theme",children:(0,a.jsx)(g,{})}),(0,a.jsxs)(f,{children:[(0,a.jsx)(v,{value:"light",children:"Claro"}),(0,a.jsx)(v,{value:"dark",children:"Escuro"}),(0,a.jsx)(v,{value:"system",children:"Sistema"})]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Escolha o tema da interface"})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.J,{htmlFor:"fontSize",children:"Tamanho da Fonte"}),(0,a.jsxs)(x,{value:e.fontSize,onValueChange:e=>t({fontSize:e}),children:[(0,a.jsx)(p,{id:"fontSize",children:(0,a.jsx)(g,{})}),(0,a.jsxs)(f,{children:[(0,a.jsx)(v,{value:"small",children:"Pequeno"}),(0,a.jsx)(v,{value:"medium",children:"M\xe9dio"}),(0,a.jsx)(v,{value:"large",children:"Grande"})]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Ajuste o tamanho do texto para melhor legibilidade"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(i.J,{htmlFor:"reducedMotion",children:"Movimentos Reduzidos"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Reduz anima\xe7\xf5es para melhor acessibilidade"})]}),(0,a.jsx)(j.d,{id:"reducedMotion",checked:e.reducedMotion,onCheckedChange:e=>t({reducedMotion:e})})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(i.J,{htmlFor:"highContrast",children:"Alto Contraste"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Aumenta o contraste para melhor visibilidade"})]}),(0,a.jsx)(j.d,{id:"highContrast",checked:e.highContrast,onCheckedChange:e=>t({highContrast:e})})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium border-b pb-2",children:"Sistema PDV"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.J,{htmlFor:"calculationMode",children:"Modo de C\xe1lculo Padr\xe3o"}),(0,a.jsxs)(x,{value:e.defaultCalculationMode,onValueChange:e=>t({defaultCalculationMode:e}),children:[(0,a.jsx)(p,{id:"calculationMode",children:(0,a.jsx)(g,{})}),(0,a.jsxs)(f,{children:[(0,a.jsx)(v,{value:"exact",children:"Troco Exato"}),(0,a.jsx)(v,{value:"suggested",children:"Troco Sugerido (Arredondado)"})]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Modo padr\xe3o para c\xe1lculo de troco"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(i.J,{htmlFor:"autoSave",children:"Salvamento Autom\xe1tico"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Salva automaticamente c\xe1lculos e fechamentos"})]}),(0,a.jsx)(j.d,{id:"autoSave",checked:e.autoSave,onCheckedChange:e=>t({autoSave:e})})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium border-b pb-2",children:"Hist\xf3rico"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(i.J,{htmlFor:"maxHistory",children:"M\xe1ximo de Itens no Hist\xf3rico"}),(0,a.jsxs)(x,{value:e.maxHistoryItems.toString(),onValueChange:e=>t({maxHistoryItems:parseInt(e)}),children:[(0,a.jsx)(p,{id:"maxHistory",children:(0,a.jsx)(g,{})}),(0,a.jsxs)(f,{children:[(0,a.jsx)(v,{value:"50",children:"50 itens"}),(0,a.jsx)(v,{value:"100",children:"100 itens"}),(0,a.jsx)(v,{value:"200",children:"200 itens"}),(0,a.jsx)(v,{value:"500",children:"500 itens"})]})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"N\xfamero m\xe1ximo de registros mantidos no hist\xf3rico"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"space-y-0.5",children:[(0,a.jsx)(i.J,{htmlFor:"autoExport",children:"Exporta\xe7\xe3o Autom\xe1tica"}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground",children:"Exporta automaticamente o hist\xf3rico quando atingir o limite"})]}),(0,a.jsx)(j.d,{id:"autoExport",checked:e.autoExportHistory,onCheckedChange:e=>t({autoExportHistory:e})})]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-lg font-medium border-b pb-2",children:"Gerenciamento de Dados"}),(0,a.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,a.jsxs)(o.$,{onClick:u,variant:"outline",className:"flex items-center gap-2 focus:ring-2 focus:ring-primary focus:ring-offset-2",children:[(0,a.jsx)(A.A,{className:"h-4 w-4"}),"Exportar Hist\xf3rico"]}),(0,a.jsxs)(o.$,{onClick:d,variant:"destructive",className:"flex items-center gap-2 focus:ring-2 focus:ring-destructive focus:ring-offset-2",children:[(0,a.jsx)(k.A,{className:"h-4 w-4"}),"Limpar Hist\xf3rico"]})]}),(0,a.jsx)("div",{className:"border-t pt-4",children:(0,a.jsx)(o.$,{onClick:r,variant:"outline",className:"w-full focus:ring-2 focus:ring-primary focus:ring-offset-2",children:"Restaurar Configura\xe7\xf5es Padr\xe3o"})})]}),(0,a.jsx)("div",{className:"text-center text-xs text-muted-foreground",children:(0,a.jsx)("p",{children:"Vers\xe3o 1.0 - Configura\xe7\xf5es salvas localmente"})})]})]})]})})})})}},5328:(e,t,r)=>{"use strict";r.d(t,{db:()=>s});class a{async initDB(){return new Promise((e,t)=>{let r=indexedDB.open(this.DB_NAME,this.DB_VERSION);r.onerror=()=>{console.error("Erro ao abrir o banco de dados:",r.error),t(r.error)},r.onsuccess=()=>{this.db=r.result,e()},r.onupgradeneeded=e=>{let t=e.target.result;t.objectStoreNames.contains(this.CLOSINGS_STORE)||t.createObjectStore(this.CLOSINGS_STORE,{keyPath:"id",autoIncrement:!0}).createIndex("date","date",{unique:!1}),t.objectStoreNames.contains(this.CALCULATIONS_STORE)||t.createObjectStore(this.CALCULATIONS_STORE,{keyPath:"id",autoIncrement:!0}).createIndex("date","date",{unique:!1})}})}async getDB(){return this.db||await this.initDB(),this.db}async addClosing(e){let t=(await this.getDB()).transaction([this.CLOSINGS_STORE],"readwrite").objectStore(this.CLOSINGS_STORE);return new Promise((r,a)=>{let s=t.add({...e,date:e.date||new Date});s.onsuccess=()=>{r(s.result)},s.onerror=()=>{console.error("Erro ao adicionar fechamento:",s.error),a(s.error)}})}async getAllClosings(){let e=(await this.getDB()).transaction([this.CLOSINGS_STORE],"readonly").objectStore(this.CLOSINGS_STORE);return new Promise((t,r)=>{let a=e.getAll();a.onsuccess=()=>{t(a.result)},a.onerror=()=>{console.error("Erro ao buscar fechamentos:",a.error),r(a.error)}})}async getClosingById(e){let t=(await this.getDB()).transaction([this.CLOSINGS_STORE],"readonly").objectStore(this.CLOSINGS_STORE);return new Promise((r,a)=>{let s=t.get(e);s.onsuccess=()=>{r(s.result)},s.onerror=()=>{console.error("Erro ao buscar fechamento:",s.error),a(s.error)}})}async deleteClosing(e){let t=(await this.getDB()).transaction([this.CLOSINGS_STORE],"readwrite").objectStore(this.CLOSINGS_STORE);return new Promise((r,a)=>{let s=t.delete(e);s.onsuccess=()=>{r()},s.onerror=()=>{console.error("Erro ao deletar fechamento:",s.error),a(s.error)}})}async exportToCSV(){let e=await this.getAllClosings(),t="Data,Operador,Total,Observa\xe7\xf5es\n";return e.forEach(e=>{let r=e.date.toLocaleDateString("pt-BR"),a=(e.total/100).toFixed(2).replace(".",","),s=e.operatorName||"",o=e.notes||"",n=e=>e.includes(",")||e.includes('"')?'"'.concat(e.replace(/"/g,'""'),'"'):e;t+="".concat(n(r),",").concat(n(s),",").concat(n(a),",").concat(n(o),"\n")}),t}async addCalculation(e){let t=(await this.getDB()).transaction([this.CALCULATIONS_STORE],"readwrite").objectStore(this.CALCULATIONS_STORE);return new Promise((r,a)=>{let s=t.add({...e,date:e.date||new Date});s.onsuccess=()=>{r(s.result)},s.onerror=()=>{console.error("Erro ao adicionar c\xe1lculo:",s.error),a(s.error)}})}async getAllCalculations(){let e=(await this.getDB()).transaction([this.CALCULATIONS_STORE],"readonly").objectStore(this.CALCULATIONS_STORE);return new Promise((t,r)=>{let a=e.getAll();a.onsuccess=()=>{t(a.result)},a.onerror=()=>{console.error("Erro ao buscar c\xe1lculos:",a.error),r(a.error)}})}async deleteCalculation(e){let t=(await this.getDB()).transaction([this.CALCULATIONS_STORE],"readwrite").objectStore(this.CALCULATIONS_STORE);return new Promise((r,a)=>{let s=t.delete(e);s.onsuccess=()=>{r()},s.onerror=()=>{console.error("Erro ao deletar c\xe1lculo:",s.error),a(s.error)}})}constructor(){this.db=null,this.DB_NAME="TrokitoDB",this.DB_VERSION=2,this.CLOSINGS_STORE="closings",this.CALCULATIONS_STORE="calculations",this.initDB()}}let s=new a},6639:(e,t,r)=>{"use strict";r.d(t,{A:()=>i});var a=r(5155),s=r(1056),o=r(5695),n=r(2115);function i(e){let{children:t}=e,r=(0,o.useRouter)(),i=(0,n.useRef)(null),[l,c]=(0,n.useState)(!1),[d,u]=(0,n.useState)(!1);return((0,n.useEffect)(()=>{c(!0);let e=s.j.isAuthenticated();u(e),e||r.push("/login")},[r]),(0,n.useEffect)(()=>{d&&i.current&&i.current.focus()},[d]),l)?d?(0,a.jsx)("div",{ref:i,tabIndex:-1,className:"focus:outline-none",children:t}):(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",role:"status","aria-live":"polite",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Redirecionando para login..."})}):(0,a.jsx)("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",role:"status","aria-live":"polite",children:(0,a.jsx)("p",{className:"text-muted-foreground",children:"Verificando autentica\xe7\xe3o..."})})}},7168:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var a=r(5155);r(2115);var s=r(9708),o=r(2085),n=r(3999);let i=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}});function l(e){let{className:t,variant:r,size:o,asChild:l=!1,...c}=e,d=l?s.DX:"button";return(0,a.jsx)(d,{"data-slot":"button",className:(0,n.cn)(i({variant:r,size:o,className:t})),...c})}},7396:(e,t,r)=>{Promise.resolve().then(r.bind(r,4619))},8482:(e,t,r)=>{"use strict";r.d(t,{Wu:()=>l,ZB:()=>i,Zp:()=>o,aR:()=>n});var a=r(5155);r(2115);var s=r(3999);function o(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card",className:(0,s.cn)("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border py-6 shadow-sm",t),...r})}function n(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-header",className:(0,s.cn)("@container/card-header grid auto-rows-min grid-rows-[auto_auto] items-start gap-1.5 px-6 has-data-[slot=card-action]:grid-cols-[1fr_auto] [.border-b]:pb-6",t),...r})}function i(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-title",className:(0,s.cn)("leading-none font-semibold",t),...r})}function l(e){let{className:t,...r}=e;return(0,a.jsx)("div",{"data-slot":"card-content",className:(0,s.cn)("px-6",t),...r})}}},e=>{var t=t=>e(e.s=t);e.O(0,[352,220,650,560,441,684,358],()=>t(7396)),_N_E=e.O()}]);